<template>
  <section class="step1">
   <h1>Étape 1. Spécifier des critères de filtrage</h1>
   <lightning-combobox
      data-checkable
      data-bind="BAM__c"
      value={BAM__c}
      label="BAM"
      placeholder="Choisissez un BAM"
      options={bams}
      onchange={handleBamChanged} >
    </lightning-combobox>

   <lightning-combobox
      data-checkable
      data-bind="Zone__c"
      value={Zone__c}
      label="Secteur à Partager"
      placeholder="Choisissez un secteur"
      options={sectors}
      onchange={bind} >
    </lightning-combobox>

  </section>

  <section class="step2">
    <h1>Étape 2. Rechercher les ZM Intérimaires</h1>
    <lightning-combobox
      data-checkable
      data-bind="ZM__c"
      value={ZM__c}
      placeholder="Choisissez un ZM"
      label="Rechercher ZM"
      options={zoneManagers}
      onchange={bind}>
    </lightning-combobox>

    <lightning-input 
      data-checkable
      data-bind="StartDate__c"
      value={StartDate__c}
      type="date" 
      label="Date de Début"
      onchange={bind}
      required>
    </lightning-input>
    <lightning-input 
      data-checkable
      data-bind="EndDate__c"
      value={EndDate__c}
      type="date"
      label="Date de Fin"
      onchange={bind}
      required>
    </lightning-input>

    <lightning-button
      label="Ajouter"
      onclick={handleCreateNewConfig}></lightning-button>

  </section>
  <section class="history">
    <h1>Historique</h1>
    <section class="dataGrid">
      <section class="row">
        <div class="cell">BAM</div>
        <div class="cell">ZM Intermédiare</div>
        <div class="cell">Secteur à Partager</div>
        <div class="cell">Date début Intérim</div>
        <div class="cell">Date fin Intérim</div>
        <div class="cell">Assigné par</div>
        <div class="cell"></div>
        <div class="cell"></div>
      </section>
      <template lwc:if={historyRecordsNotEmpty}>
        <template 
          for:each={historyRecords}
          for:item="historyRecord">
          <section class="row" data-id={historyRecord.Id} key={historyRecord.Id} >
            <div class="cell" data-label="BAM">
              <span>{historyRecord.BAM__c}</span>
            </div>
            <div class="cell" data-label="ZM">
                <span>{historyRecord.ZM__r.Name}</span>
            </div>
            <div class="cell" data-label="ZM">
                <span>{historyRecord.Zone__r.ConnexionZM__r.Name}</span>
            </div>
            <div class="cell" data-label="StartDate">
                <span>{historyRecord.StartDate__c}</span>
            </div>
            <div class="cell" data-label="EndDate">
                <span>{historyRecord.EndDate__c}</span>
            </div>
            <div class="cell" data-label="Assigne">
                <span>{historyRecord.User__r.Name}</span>
            </div>
            <div class="cell">
              <lightning-button-icon 
                class="btnEdit"
                icon-name="utility:edit"
                onclick={handleClickEdit}
                value={historyRecord.Id}>
              </lightning-button-icon>
            </div>
            <div class="cell">
              <lightning-button-icon 
                class="btnDelete"
                icon-name="utility:delete"
                onclick={handleClickDelete}
                value={historyRecord.Id}>
              </lightning-button-icon>
            </div>
          </section>
        </template> 
      </template>
    </section>
  </section>
</template>